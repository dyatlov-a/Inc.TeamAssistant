@using Inc.TeamAssistant.Primitives.Languages

@inject NavigationManager NavigationManager

@foreach (var culture in LanguageSettings.LanguageIds)
{
    var path = ChangeCulture(culture.Value);
    
    <a href="@path" @onclick="() => MoveTo(path)" class="link link_white navbar__item" @onclick:preventDefault="true">
        @culture.Value
    </a>
}

@code {
    private string ChangeCulture(string culture)
    {
        var cleanUri = NavigationManager.ToBaseRelativePath(NavigationManager.Uri);
        
        foreach (var languageId in LanguageSettings.LanguageIds)
            cleanUri = cleanUri.Replace($"{languageId.Value}/", string.Empty);

        return $"/{culture}/{cleanUri}";
    }

    private void MoveTo(string path) => NavigationManager.NavigateTo(path, forceLoad: true);
}