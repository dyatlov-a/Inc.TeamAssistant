@implements IDisposable

@inject NavRouter NavRouter

<RoomNavbar Links="Links" />

@code {
    /// <summary>
    /// Room identifier.
    /// </summary>
    [Parameter, EditorRequired]
    public Guid RoomId { get; set; }

    private IDisposable? _routerScope;
    
    protected override void OnInitialized()
    {
        _routerScope = NavRouter.OnRouteChanged(StateHasChanged);
    }

    private IReadOnlyCollection<RoomNavbarLinkViewModel> Links =>
    [
        new("TeamHealthCheck", NavRouter.CreateRoute($"survey/{RoomId:N}"), NavRouter.CurrentUrl.Contains("/survey")),
        new("RetroBoard", NavRouter.CreateRoute($"retro/{RoomId:N}"), NavRouter.CurrentUrl.Contains("/retro")),
        new("RetroBacklog", NavRouter.CreateRoute($"backlog/{RoomId:N}"), NavRouter.CurrentUrl.Contains("/backlog")),
        new("RoomHistory", NavRouter.CreateRoute($"room-history/{RoomId:N}"), NavRouter.CurrentUrl.Contains("/room-history"))
    ];
    
    public void Dispose() => _routerScope?.Dispose();
}